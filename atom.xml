<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>smallstrong&#39;s blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.smallstrong.wang/"/>
  <updated>2017-09-21T07:32:42.000Z</updated>
  <id>http://www.smallstrong.wang/</id>
  
  <author>
    <name>Small Strong</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>揭秘一行代码完成千台服务器自动升级部署</title>
    <link href="http://www.smallstrong.wang/2017/09/21/%E6%8F%AD%E7%A7%98%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%AE%8C%E6%88%90%E5%8D%83%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%87%AA%E5%8A%A8%E5%8D%87%E7%BA%A7%E9%83%A8%E7%BD%B2/"/>
    <id>http://www.smallstrong.wang/2017/09/21/揭秘一行代码完成千台服务器自动升级部署/</id>
    <published>2017-09-21T02:36:33.000Z</published>
    <updated>2017-09-21T07:32:42.000Z</updated>
    
    <content type="html"><![CDATA[<center>揭秘一行代码完成千台服务器自动升级部署</center>


<h3 id="核心思想"><a href="#核心思想" class="headerlink" title="核心思想"></a>核心思想</h3><blockquote>
<p>服务器利用crontab定时任务去每分钟跑一个shell脚本,shell脚本的任务是打开服务器项目目录，pull 一下www分支下的代码。ok,自动化部署完成。而触发这个事件，你需要键入的一行代码就是将本地www分支上的代码push到远程www分支即可。</p>
</blockquote>
<p>正常开发流程可能会有dev,test,stage,www四个环境。<br>dev环境是开发环境,test测试环境,stage预发布环境这三个环境分为一类,称为线下环境。另一类就是线上环境了。</p>
<p>首先，在git上先为各个环境拉出对应分支。dev,test,stage,www四条环境分支。我们小伙伴开发在master分支上,当需要对接口的时候，我们切换到dev分支merge掉master分支。然后将本地的dev分支推送到远程的dev分支上去。此时，crontab定时器跑任务时候，会把远程dev分支的更新pull下来。而pull下来的代码此刻就完成了服务器代码的更新部署操作。同样的姿势,你可以在test及stage环境下操作。</p>
<p>但是，线下操作与线上操作不能同样对待。毕竟上线代码不是每个小程序员都有的权力。可以在push到远程www分支时候设置权限，每一个pr都要主管同意才能push成功，从而达到安全性的把关。</p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;揭秘一行代码完成千台服务器自动升级部署&lt;/center&gt;


&lt;h3 id=&quot;核心思想&quot;&gt;&lt;a href=&quot;#核心思想&quot; class=&quot;headerlink&quot; title=&quot;核心思想&quot;&gt;&lt;/a&gt;核心思想&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;服务器利用cront
    
    </summary>
    
      <category term="服务器" scheme="http://www.smallstrong.wang/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    
  </entry>
  
  <entry>
    <title>python 时间处理类积累</title>
    <link href="http://www.smallstrong.wang/2017/09/11/python-%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86%E7%B1%BB%E7%A7%AF%E7%B4%AF/"/>
    <id>http://www.smallstrong.wang/2017/09/11/python-时间处理类积累/</id>
    <published>2017-09-11T01:10:59.000Z</published>
    <updated>2017-09-11T01:16:28.000Z</updated>
    
    <content type="html"><![CDATA[<center>python 时间处理类整理</center>

<h3 id="直接贴码，下附链接"><a href="#直接贴码，下附链接" class="headerlink" title="直接贴码，下附链接"></a>直接贴码，下附链接</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div></pre></td><td class="code"><pre><div class="line">#! /usr/bin/env python</div><div class="line"># -*- coding: utf8 -*-</div><div class="line"></div><div class="line">import os</div><div class="line">import sys</div><div class="line">import time</div><div class="line">import datetime</div><div class="line">import json</div><div class="line">import random</div><div class="line">import hashlib</div><div class="line">import math</div><div class="line">import HTMLParser</div><div class="line">import calendar</div><div class="line">import string</div><div class="line"></div><div class="line"></div><div class="line">def get_ts():</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :return: 获取当前时间轴</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    return long(time.time())</div><div class="line"></div><div class="line"></div><div class="line">def get_ms():</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :return: 获取当前时间轴 毫秒值</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    return long(time.time() * 1000)</div><div class="line"></div><div class="line"></div><div class="line">def day2ts(day):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param date: 2017-09-09</div><div class="line">    :return: 时间轴</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    return time.mktime(time.strptime(day, &apos;%Y-%m-%d&apos;))</div><div class="line"></div><div class="line"></div><div class="line">def day_cn2ts(day):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param date: 2017年09月09日</div><div class="line">    :return: 时间轴</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    return time.mktime(time.strptime(day, &apos;%Y年%m月%d日&apos;))</div><div class="line"></div><div class="line"></div><div class="line">def time2ts(time):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param time:  2017-09-09 11:11:11</div><div class="line">    :return: 时间轴</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    return time.mktime(time.strptime(time, &apos;%Y-%m-%d %H:%M:%S&apos;))</div><div class="line"></div><div class="line"></div><div class="line">def time_cn2ts(time):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param time:  2017年09月09日 11:11:11</div><div class="line">    :return: 时间轴</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    return time.mktime(time.strptime(time, &apos;%Y年%m月%d日 %H:%M:%S&apos;))</div><div class="line"></div><div class="line"></div><div class="line">def get_month(ts=None):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param ts: 时间轴</div><div class="line">    :return: 获取时间轴月份</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    if ts is None:</div><div class="line">        ts = get_ts()</div><div class="line">    return time.strftime(&apos;%Y-%m&apos;, time.localtime(ts))</div><div class="line"></div><div class="line"></div><div class="line">def get_month_cn(ts=None):</div><div class="line">    if ts is None:</div><div class="line">        ts = get_ts()</div><div class="line">    return time.strftime(&apos;%Y年%m日&apos;, time.localtime(ts))</div><div class="line"></div><div class="line"></div><div class="line">def get_day(ts=None):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param ts: 时间轴</div><div class="line">    :return: 返回时间轴对应的日子</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    if ts is None:</div><div class="line">        ts = get_ts()</div><div class="line">    return time.strftime(&apos;%Y-%m-%d&apos;, time.localtime(ts))</div><div class="line"></div><div class="line"></div><div class="line">def get_day_cn(ts=None):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param ts: 时间轴</div><div class="line">    :return: 返回时间轴对应的日子 中文</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    if ts is None:</div><div class="line">        ts = get_ts()</div><div class="line">    return time.strftime(&apos;%Y年%m月%d日&apos;, time.localtime(ts))</div><div class="line"></div><div class="line"></div><div class="line">def get_time(ts=None):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param ts: 时间轴</div><div class="line">    :return: 返回 %Y-%m-%d %H:%M:%S</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    if ts is None:</div><div class="line">        ts = get_ts()</div><div class="line">    return time.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;, time.localtime(ts))</div><div class="line"></div><div class="line"></div><div class="line">def get_time_cn(ts=None):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param ts: 时间轴</div><div class="line">    :return: 返回 %Y年%m月%d日 %H:%M:%S</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    if ts is None:</div><div class="line">        ts = get_ts()</div><div class="line">    return time.strftime(&apos;%Y年%m月%d日 %H:%M:%S&apos;, time.localtime(ts))</div><div class="line"></div><div class="line"></div><div class="line">def get_week_num():</div><div class="line">    &apos;&apos;&apos;</div><div class="line">    获取今天的星期</div><div class="line">    :return: 0~6,0-&gt;Sunday</div><div class="line">    &apos;&apos;&apos;</div><div class="line">    l_time = time.localtime()</div><div class="line">    return int(time.strftime(&apos;%w&apos;, l_time))</div><div class="line"></div><div class="line"></div><div class="line">def get_today_zero_time(now=time.time()):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param now: 时间轴</div><div class="line">    :return: 传入时间轴当天的零点时间轴</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    midnight = now - (now % 86400) + time.timezone</div><div class="line">    return long(midnight)</div><div class="line"></div><div class="line"></div><div class="line">def get_last_month(date=None):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param date: 时间轴</div><div class="line">    :return: 当前时间轴 上月  ——&gt; 2017-08</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    if not date:</div><div class="line">        date = get_day()</div><div class="line">    date_list = date.split(&apos;-&apos;)</div><div class="line">    if int(date_list[1]) == 1:</div><div class="line">        return &apos;&#123;&#125;-12&apos;.format(int(date_list[0]) - 1)</div><div class="line"></div><div class="line">    return &apos;&#123;&#125;-&#123;&#125;&apos;.format(date_list[0], str(int(date_list[1]) - 1).zfill(2))</div><div class="line"></div><div class="line"></div><div class="line">def get_week_first_day(ts=None):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param ts: 时间轴</div><div class="line">    :return: 当前时间轴本周的日期2017-09-04</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    if not ts:</div><div class="line">        ts = get_ts()</div><div class="line">    day = get_day(ts)</div><div class="line">    time_list = day.split(&apos;-&apos;)</div><div class="line">    week = calendar.weekday(int(time_list[0]), int(time_list[1]), int(time_list[2]))</div><div class="line">    week_first_day = get_day(ts - week * 86400)</div><div class="line">    return week_first_day</div><div class="line"></div><div class="line"></div><div class="line">def get_week_first_timestamp(ts=None):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param ts: 得到该时间轴 这周星期一起始时间轴</div><div class="line">    :return:</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    a = &apos;&#123;&#125; 00:00:01&apos;.format(get_week_first_day(ts))</div><div class="line">    s = time.mktime(time.strptime(a, &apos;%Y-%m-%d %H:%M:%S&apos;))</div><div class="line">    return long(s)</div><div class="line"></div><div class="line"></div><div class="line">def d_value_day(ts, now_ts=get_ts()):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    :param ts: 之前的时间轴</div><div class="line">    :param now_ts: 现在的时间轴</div><div class="line">    :return: 相差天数</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    d1 = get_day(ts)</div><div class="line">    d2 = get_day(now_ts)</div><div class="line">    date_list1 = d1.split(&apos;-&apos;)</div><div class="line">    date_list2 = d2.split(&apos;-&apos;)</div><div class="line">    d1 = datetime.datetime(int(date_list1[0]), int(date_list1[1]), int(date_list1[2]))</div><div class="line">    d2 = datetime.datetime(int(date_list2[0]), int(date_list2[1]), int(date_list2[2]))</div><div class="line">    return (d2 - d1).days</div><div class="line"></div><div class="line"></div><div class="line">def get_weekenk_time(ctime, ts):</div><div class="line">    &apos;&apos;&apos;</div><div class="line">    :param ctime:</div><div class="line">    :param ts:</div><div class="line">    :return: 输出ctime所在周截止到ts 的周末时间</div><div class="line">    &apos;&apos;&apos;</div><div class="line">    saturday_start_stamp, sunday_end_time = get_weekenk_full_stamp(ctime)</div><div class="line">    if ctime &lt;= saturday_start_stamp:</div><div class="line">        if ts &lt;= sunday_end_time and ts &gt; saturday_start_stamp:</div><div class="line">            return ts - saturday_start_stamp</div><div class="line">        elif ts &lt;= saturday_start_stamp:</div><div class="line">            return 0</div><div class="line">        else:</div><div class="line">            return 86400 * 2</div><div class="line">    else:</div><div class="line">        if ts &lt;= sunday_end_time:</div><div class="line">            return ts - ctime</div><div class="line">        else:</div><div class="line">            return sunday_end_time - ctime</div><div class="line"></div><div class="line"></div><div class="line">def get_weekenk_full_stamp(ctime):</div><div class="line">    &apos;&apos;&apos;</div><div class="line">    :param ctime: 传入 一个时间轴</div><div class="line">    :return:   输出 这个时间轴对应的这个周的周末的 起始时间自 和结束时间轴</div><div class="line">    &apos;&apos;&apos;</div><div class="line">    str = time.strftime(&quot;%Y-%m-%d&quot;, time.localtime(ctime))</div><div class="line">    c_start_stamp = long(time.mktime(time.strptime(str, &apos;%Y-%m-%d&apos;)))</div><div class="line"></div><div class="line">    day = time.localtime(ctime).tm_wday</div><div class="line">    if day == 5:</div><div class="line">        return c_start_stamp, c_start_stamp + 86400 * 2 -1</div><div class="line">    elif day == 6:</div><div class="line">        return c_start_stamp - 86400, c_start_stamp + 86400 -1</div><div class="line">    else:</div><div class="line">        saturday_start_stamp = (5 - day) * 86400 + c_start_stamp</div><div class="line">        return saturday_start_stamp, saturday_start_stamp + 86400 * 2 -1</div><div class="line"></div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    print get_ts()</div><div class="line">    print get_ms()</div><div class="line">    print get_day(get_ts())</div><div class="line">    print get_day_cn(get_ts())</div><div class="line">    print get_week_num()</div><div class="line">    print get_today_zero_time()</div><div class="line">    print get_last_month()</div><div class="line">    print get_week_first_day()</div><div class="line">    print get_weekenk_full_stamp(get_ts())</div></pre></td></tr></table></figure>
<h3 id="获取地址"><a href="#获取地址" class="headerlink" title="获取地址"></a>获取地址</h3><p><a href="https://github.com/smallstrong0/py_time" target="_blank" rel="external">https://github.com/smallstrong0/py_time</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;python 时间处理类整理&lt;/center&gt;

&lt;h3 id=&quot;直接贴码，下附链接&quot;&gt;&lt;a href=&quot;#直接贴码，下附链接&quot; class=&quot;headerlink&quot; title=&quot;直接贴码，下附链接&quot;&gt;&lt;/a&gt;直接贴码，下附链接&lt;/h3&gt;&lt;figure clas
    
    </summary>
    
    
      <category term="python" scheme="http://www.smallstrong.wang/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Mac上用Jenkins自动化打包Android应用</title>
    <link href="http://www.smallstrong.wang/2017/08/03/Mac%E4%B8%8A%E7%94%A8Jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E6%89%93%E5%8C%85Android%E5%BA%94%E7%94%A8/"/>
    <id>http://www.smallstrong.wang/2017/08/03/Mac上用Jenkins自动化打包Android应用/</id>
    <published>2017-08-03T01:12:16.000Z</published>
    <updated>2017-08-03T01:14:29.000Z</updated>
    
    <content type="html"><![CDATA[<center> Mac下 Jenkins 持续集成 之Android自动化打包发包</center>


<h3 id="总结下Jenkins在Mac电脑上自动化打包Android应用遇到的一些小问题"><a href="#总结下Jenkins在Mac电脑上自动化打包Android应用遇到的一些小问题" class="headerlink" title="总结下Jenkins在Mac电脑上自动化打包Android应用遇到的一些小问题"></a>总结下Jenkins在Mac电脑上自动化打包Android应用遇到的一些小问题</h3><blockquote>
<p>最深刻的一点就是，Jenkins安装完成后，其实你电脑会自动添加一个Jenkins用户，目录在/Users/Shared/Jenkins下，你接下来遇到的绝大多数问题无非是该用户无权限访问你本机的Android sdk啊，你本机用户无法去查看Jenkins用户下的文件之类的。所以这次我玩的姿势是在命令行直接切换成root用户 命令行输入 sudo su root以及密码,省去无权限问题。另外根据你在玩的实际情况，改变你要访问路径的权限即可，暴力虽不优雅chmod 777 (your file or dir)。ls -al 可以查看当前目录下所有文件 包括隐藏文件以及这些文件所对应用户的权限，防身技能要记住。记住以上几点我们就来开始装逼之旅。</p>
</blockquote>
<h3 id="三步走"><a href="#三步走" class="headerlink" title="三步走"></a>三步走</h3><h4 id="1-git配置好，把代码拉下来。（Jenkins配置Java路径等所有配置路径问题基本都是用户权限问题，不多概述，当然前提你路径得写对）"><a href="#1-git配置好，把代码拉下来。（Jenkins配置Java路径等所有配置路径问题基本都是用户权限问题，不多概述，当然前提你路径得写对）" class="headerlink" title="1.git配置好，把代码拉下来。（Jenkins配置Java路径等所有配置路径问题基本都是用户权限问题，不多概述，当然前提你路径得写对）"></a>1.git配置好，把代码拉下来。（Jenkins配置Java路径等所有配置路径问题基本都是用户权限问题，不多概述，当然前提你路径得写对）</h4><h4 id="2-Use-Gradle-Wrapper构建项目（问题最多）"><a href="#2-Use-Gradle-Wrapper构建项目（问题最多）" class="headerlink" title="2.Use Gradle Wrapper构建项目（问题最多）"></a>2.Use Gradle Wrapper构建项目（问题最多）</h4><h4 id="3-配置fir来上传应用"><a href="#3-配置fir来上传应用" class="headerlink" title="3.配置fir来上传应用"></a>3.配置fir来上传应用</h4><h3 id="问题总结"><a href="#问题总结" class="headerlink" title="问题总结"></a>问题总结</h3><ol>
<li><p>mac用户在安装好Jenkins遇到的第一个错误就是文件夹中文件权限问题。你以你本机用户去访问Jenkins用户目录下是没有读写权限的。下面就是你要的answer。意思就是说该目录你以原来mac默认创建的用户是没有权限去查看的，你必须添加mac下自己的用户并开放读写权限。good luck!<br>/Users/Shared/Jenkins/Home/secrets/initialAdminPassword<br><a href="https://stackoverflow.com/questions/37146063/how-do-i-get-initial-admin-password-for-jenkins-on-mac" target="_blank" rel="external">https://stackoverflow.com/questions/37146063/how-do-i-get-initial-admin-password-for-jenkins-on-mac</a></p>
</li>
<li><p>git ssh登陆老报错。(https的直接跳)<br>cd /Users/smallstrong/.ssh （smallstrong是我用户名不是你的这目录如果没有自己先去ssh生成吧不多说了）里面是你ssh的公钥私钥，把里面所有文件复制到/Users/Shared/Jenkins/.ssh目录下，在你配置源码管理的时候我的用户名字是Jenkins然后ssh选择 From the Jenkins master ~/.ssh即可。</p>
</li>
<li><p>如果你在构建环节选择Use Gradle Wrapper，那么他会自动去下载你依赖的gradle包，速度之慢欲仙欲死。我是直接把本地的/Users/smallstrong/.gradle/wrapper/dists/目录下我干两年Android来下的所有gradle,哈哈啥版本都有直接copy。把要下载的gradle版本copy到/Users/Shared/Jenkins/Home/workspace/Android/wrapper/dists(其中我的项目名字叫Android)目录下即可。</p>
</li>
</ol>
<p>4.有些时候我们git上没有local.properties文件，会报找不到sdk目录问题。在里面我路径是这样子的ndk.dir=/Users/smallstrong/Library/Android/sdk/ndk-bundle<br>sdk.dir=/Users/smallstrong/Library/Android/sdk，记住改变该目录以及上级上上级目录的访问权限，不然这货读取不到又报错。</p>
<p>5.当你进入到这一步的时候，往下走就是正常的gradle编译打包过程，我们签名key不放在服务器所以我本地copy一份放在了根目录，你们的我不知道。根据报错玩吧。</p>
<h3 id="任何意想不到的问题欢迎留言，我刚弄完还算熟，兴许会给你带来帮助。"><a href="#任何意想不到的问题欢迎留言，我刚弄完还算熟，兴许会给你带来帮助。" class="headerlink" title="任何意想不到的问题欢迎留言，我刚弄完还算熟，兴许会给你带来帮助。"></a>任何意想不到的问题欢迎留言，我刚弄完还算熟，兴许会给你带来帮助。</h3><blockquote>
<p>因为之前在Google云服务上已经折腾过一回且试用将近一月稳定高效，所以这次在本机mac上做这件事感觉在捏菜（因为本机电脑命令行敲起来不卡贼快，配ssh登陆服务器做这些事情，不说了先哭一会儿）。现在的我即将踏上Python后端取经之路，跨端玩想想都刺激。</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt; Mac下 Jenkins 持续集成 之Android自动化打包发包&lt;/center&gt;


&lt;h3 id=&quot;总结下Jenkins在Mac电脑上自动化打包Android应用遇到的一些小问题&quot;&gt;&lt;a href=&quot;#总结下Jenkins在Mac电脑上自动化打包Andro
    
    </summary>
    
      <category term="Android" scheme="http://www.smallstrong.wang/categories/Android/"/>
    
    
  </entry>
  
  <entry>
    <title>Shadowsocks 全端翻墙</title>
    <link href="http://www.smallstrong.wang/2017/07/23/Shadowsocks-%E5%85%A8%E7%AB%AF%E7%BF%BB%E5%A2%99/"/>
    <id>http://www.smallstrong.wang/2017/07/23/Shadowsocks-全端翻墙/</id>
    <published>2017-07-23T13:48:28.000Z</published>
    <updated>2017-07-24T01:13:28.000Z</updated>
    
    <content type="html"><![CDATA[<p><center>Shadowsocks 全端翻墙</center></p>
<h3 id="开篇先来点逼格的。"><a href="#开篇先来点逼格的。" class="headerlink" title="开篇先来点逼格的。"></a>开篇先来点逼格的。</h3><blockquote>
<p>I spend many ways to break the GFW,and this is my destination.</p>
</blockquote>
<h3 id="Shadowsocks-全端翻墙"><a href="#Shadowsocks-全端翻墙" class="headerlink" title="Shadowsocks 全端翻墙"></a>Shadowsocks 全端翻墙</h3><h5 id="对比国内众翻墙姿势，种类奇多但多数不够优雅。免费VPN流量的限制及其难以忍受的不稳定性（某灯频繁验证），付费VPN死于政策因素卷款跑路的层出不穷（green，佛跳墙），网上免费ss六小时改一次ip地址，告诉我你能忍？"><a href="#对比国内众翻墙姿势，种类奇多但多数不够优雅。免费VPN流量的限制及其难以忍受的不稳定性（某灯频繁验证），付费VPN死于政策因素卷款跑路的层出不穷（green，佛跳墙），网上免费ss六小时改一次ip地址，告诉我你能忍？" class="headerlink" title="对比国内众翻墙姿势，种类奇多但多数不够优雅。免费VPN流量的限制及其难以忍受的不稳定性（某灯频繁验证），付费VPN死于政策因素卷款跑路的层出不穷（green，佛跳墙），网上免费ss六小时改一次ip地址，告诉我你能忍？"></a>对比国内众翻墙姿势，种类奇多但多数不够优雅。免费VPN流量的限制及其难以忍受的不稳定性（某灯频繁验证），付费VPN死于政策因素卷款跑路的层出不穷（green，佛跳墙），网上免费ss六小时改一次ip地址，告诉我你能忍？</h5><blockquote>
<p>why shadowsocks?  </p>
</blockquote>
<ol>
<li>该服务全天免费提供，高速稳定，无流量限制。</li>
<li>该服务一个账号，win、mac、iphone、android、ipad全端翻墙。</li>
<li>该服务搭在我的Google云服务器上，数据的安全性有保证。</li>
</ol>
<h4 id="Use"><a href="#Use" class="headerlink" title="Use"></a>Use</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">服务器地址： 104.154.222.14</div><div class="line">服务器端口： 8989</div><div class="line">数据加密方式： aes-256-cfb</div><div class="line">密码： small</div><div class="line">代理端口： 1080（optional ，up on you）</div></pre></td></tr></table></figure>
<ol>
<li>打开对于设备的客户端，输入上述信息。</li>
<li>启动代理。</li>
</ol>
<blockquote>
<p>Any question:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">qq: 393019766</div><div class="line">wechat: smallstrong0</div><div class="line">e-mail: smallstrong007@gmail.com</div><div class="line">blog: smallstrong.wang</div></pre></td></tr></table></figure>
<h3 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h3><p><a href="https://github.com/smallstrong0/ss" target="_blank" rel="external">https://github.com/smallstrong0/ss</a></p>
<h3 id="github上提供的客户端我在-我的mac-win10-ihpnoe-以及Android设备上都是完美运行的，有小伙伴翻译win7系统对应的客户端无法使用，应该是版本兼容问题-github上我已经上传了对应win7的版本，如果有问题留言沟通。"><a href="#github上提供的客户端我在-我的mac-win10-ihpnoe-以及Android设备上都是完美运行的，有小伙伴翻译win7系统对应的客户端无法使用，应该是版本兼容问题-github上我已经上传了对应win7的版本，如果有问题留言沟通。" class="headerlink" title="github上提供的客户端我在 我的mac win10 ihpnoe 以及Android设备上都是完美运行的，有小伙伴翻译win7系统对应的客户端无法使用，应该是版本兼容问题,github上我已经上传了对应win7的版本，如果有问题留言沟通。"></a>github上提供的客户端我在 我的mac win10 ihpnoe 以及Android设备上都是完美运行的，有小伙伴翻译win7系统对应的客户端无法使用，应该是版本兼容问题,github上我已经上传了对应win7的版本，如果有问题留言沟通。</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;center&gt;Shadowsocks 全端翻墙&lt;/center&gt;&lt;/p&gt;
&lt;h3 id=&quot;开篇先来点逼格的。&quot;&gt;&lt;a href=&quot;#开篇先来点逼格的。&quot; class=&quot;headerlink&quot; title=&quot;开篇先来点逼格的。&quot;&gt;&lt;/a&gt;开篇先来点逼格的。&lt;/h3&gt;&lt;blo
    
    </summary>
    
      <category term="科学上网" scheme="http://www.smallstrong.wang/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
    
  </entry>
  
  <entry>
    <title>在google cloud 上搭建Jenkins持续集成实现Android应用的自动打包</title>
    <link href="http://www.smallstrong.wang/2017/07/23/%E5%9C%A8google-cloud-%E4%B8%8A%E6%90%AD%E5%BB%BAJenkins%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E5%AE%9E%E7%8E%B0Android%E5%BA%94%E7%94%A8%E7%9A%84%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85/"/>
    <id>http://www.smallstrong.wang/2017/07/23/在google-cloud-上搭建Jenkins持续集成实现Android应用的自动打包/</id>
    <published>2017-07-23T07:06:42.000Z</published>
    <updated>2017-08-03T01:14:28.000Z</updated>
    
    <content type="html"><![CDATA[<center>服务器 Jenkins 持续集成 之Android自动化打包发包</center>

<blockquote>
<p>本篇单纯为了做记录，最基本条件就是你需要全程翻墙，而且你需要一台配置不是最低的VPS。</p>
<p>偶然间在小伙伴的桌上看到了一本APP研发录，兴起就花了一下午看了一下。书里讲的东西都非常切合实际开发情景。当读到第八章自动打包的时候，觉得这个事情可以搞一波。</p>
<p>对比实际开发中，当提测时候经常遇到ui 测试找你说这个bug啥啥的，有些其实已经修复了只是没有更新包。碰巧那会儿你正(<del>和妹子聊得开心</del>）认真工作。看着旁边测试妹子还站着呢，你怎忍心？没办法，停下来，花个N分钟只是为了装个包。。。只是为了装个包。。。只是为了装个包？那还需要我亲自动手，服务器来做不就行了。</p>
</blockquote>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><ol>
<li>一台VPS服务器（由于Android用gradle打包的过程是一个十分吃系统资源的活，公司的应用配置在双核 13g内存的情况下打包完成是4分钟）</li>
<li>Google cloud有由Bitnami提供的一套包含Jenkins 及一些其必要的插件包括，及其他必要环境的方案。我在下面会贴图。（你可以理解使用这套方案，你这台VPS会默认安装Debian操作系统，里面已经拥有了Jenkins的一些必要环境已经插件，而且这台Debian系统的VPS，已经预装了Java环境，gradle环境，以及git环境）</li>
<li>上面两步一句话概括就是你在一台VPS上有了个Jenkins的CI系统，默认80端口就能访问。那接下来的任务就是我们要这台Debian系统的服务器拥有打包Android应用功能的环境。前面说到Java环境已经有了，gradle环境已经有了，要实现版本控制的git环境已经有了，那就还缺Android sdk环境了。想到，我们SDK只需要提供编译打包的功能，所以只需要下载SDK tools即可。命令行官网自行下载，方法自己去找（偷偷告诉你，Google自家云服务器下载这个tools速度惊人）</li>
<li>当准备好所有Android打包需要的环境之后，在Jenkins创建项目，配置好相应环境的目录。这些网上很多，不过我相信每个人遇到的问题都会有所不同，我在文章最后会说说我掉进的一些深坑。配置好环境之后，我是每隔两分钟检查git库是否有更新有更新就打包，最后我会将生成好的debug包上传至fir进行分发。测试和UI同学直接扫码下载安装。解放双手值得拥有。</li>
</ol>
<h3 id="我掉进的一些深坑"><a href="#我掉进的一些深坑" class="headerlink" title="我掉进的一些深坑"></a>我掉进的一些深坑</h3><ol>
<li>由于对Linux系统的不熟悉，加上用ssh远程登录操作服务器真的很卡。这第一个坑就是，用户权限导致了我服务器配置的正确的ssh，然而我公司的git服务器压根儿连不上。当时真的把我搞懵逼了。解决方案是创建一个Jenkins用户，修改你创建的Jenkins项目的目录权限。这里你要掌握Debian系统下自由切换root及其他用户。</li>
<li>在填写构建项目的时候，一定选择Use Gradle Wrapper，Make gradlew executable要勾上Force GRADLE_USER_HOME to use workspace    也勾上。这样他会自己去下载gradle。</li>
<li>VPS配置不能低，双核10g内存我觉得是底配。不然编译打包过程出个gradle need more memory之类的服务器就躺了。</li>
<li>另外一些，包括Android编译时候需要统一license，Android SDK的路径是写在local.properties里面的。路径写正确了。还有各种环境配置的目录基本都在/opt/bitnami/下面。部分Jenkins插件也需要安装。反正缺啥补啥，看报错定位，用Google来解决问题，遇到问题先不慌，已经有这么多人搞好了，说明那种掉下去爬不上的天坑肯定是没有的，你也可以的。</li>
</ol>
<h3 id="一些我参考的链接-希望对你也有帮助"><a href="#一些我参考的链接-希望对你也有帮助" class="headerlink" title="一些我参考的链接 希望对你也有帮助"></a>一些我参考的链接 希望对你也有帮助</h3><p><a href="http://www.vogella.com/tutorials/JenkinsAndroid/article.html#android_jenkinsbuild_installation" target="_blank" rel="external">http://www.vogella.com/tutorials/JenkinsAndroid/article.html#android_jenkinsbuild_installation</a></p>
<p><a href="http://jaycechant.info/2017/Android-sdk-on-Linux-for-Jenkins-etc/" target="_blank" rel="external">http://jaycechant.info/2017/Android-sdk-on-Linux-for-Jenkins-etc/</a></p>
<p><a href="https://stackoverflow.com/questions/39760172/you-have-not-accepted-the-license-agreements-of-the-following-sdk-components" target="_blank" rel="external">https://stackoverflow.com/questions/39760172/you-have-not-accepted-the-license-agreements-of-the-following-sdk-components</a></p>
<h3 id="写到最后"><a href="#写到最后" class="headerlink" title="写到最后"></a>写到最后</h3><p>这本是运维该干的事情，但是你既然已经有了一颗(<del>装逼</del>)瞎折腾的心就别半途而废。我在我mac本 已经 公司的win本上在本地都事先成功打包过自己github上的一些小demo。都成功了，但是换了Debian系统的服务器还是会遇到各种层出不穷的问题，关键就是不放弃。我算算在第一次成功打出包之前我至少有50次失败的经历。</p>
<p>这个打包服务已经正常稳定的工作两星期了，的确方便了不少。至少省下来和女票正常交流的时间哈哈。如果你遇到任何这方面的问题，欢迎留言交流。</p>
<h3 id="打包记录"><a href="#打包记录" class="headerlink" title="打包记录"></a>打包记录</h3><p><img src="http://upload-images.jianshu.io/upload_images/1321838-5e952fcca9a44753.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="屏幕快照 2017-07-23 下午4.30.07.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;服务器 Jenkins 持续集成 之Android自动化打包发包&lt;/center&gt;

&lt;blockquote&gt;
&lt;p&gt;本篇单纯为了做记录，最基本条件就是你需要全程翻墙，而且你需要一台配置不是最低的VPS。&lt;/p&gt;
&lt;p&gt;偶然间在小伙伴的桌上看到了一本APP研发录，
    
    </summary>
    
      <category term="Android" scheme="http://www.smallstrong.wang/categories/Android/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之访问者模式</title>
    <link href="http://www.smallstrong.wang/2017/05/16/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/05/16/设计模式之访问者模式/</id>
    <published>2017-05-16T06:27:55.000Z</published>
    <updated>2017-05-16T07:58:48.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之访问者模式</center>

<blockquote>
<p>访问者模式<br>例子以公司招聘查看简历为背景</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-b864a2960f721b4e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="访问者模式UML.png"></p>
<pre><code>interface Visitor{
    void visitClerical(Clerical clerical);//查看文员简历
    void visitCoder(Coder coder);//查看程序员简历
}     
</code></pre><blockquote>
<p>访问者接口，分别对ElementA与ElementB进行访问</p>
</blockquote>
<pre><code>class HRVisitor{
    public void visitClerical(Clerical clerical){
        //HR关注文员简历XXXXX
    }

    public void visitCoder(Coder coder){
        //HR看码农简历，看经验看学校
    }
}
</code></pre><blockquote>
<p>HR访问者</p>
</blockquote>
<pre><code>class CTOVisitor{
    public void visitClerical(Clerical clerical){
        //CTO不关心文员简历，可是是空实现
    }

    public void visitCoder(Coder coder){
        //CTO看码农简历，看项目 看技能
    }
}
</code></pre><blockquote>
<p>CTO访问者</p>
</blockquote>
<pre><code>abstract class JobSeeker{
    public String name;
    public String school;
    public String skill;

    public JobSeeker(String name ,String school ,String skill){
        this.name = name;
        this.school = school;
        this.skill = skill;
    }

    public abstract void accept(Visitor visitor);
}
</code></pre><blockquote>
<p>抽象求职者类    </p>
</blockquote>
<pre><code>class Clerical extends JobSeeker{
    public Clerical(String name ,String school ,String skill){
        super(name , school , skill);
    }
    public void accept(Visitor visitor){
        visitor.visitClerical(this);
    }
}
</code></pre><blockquote>
<p>文员求职者    </p>
</blockquote>
<pre><code>class Coder extends JobSeeker{
    public Coder(String name ,String school ,String skill){
        super(name , school , skill);
    }
    public void accept(Visitor visitor){
        visitor.visitCoder(this);
    }
}
</code></pre><blockquote>
<p>码农求职者</p>
</blockquote>
<pre><code>public class JobStructure{
    List&lt;JobSeeker&gt; list = new ArrayList&lt;&gt;();

    public void seeResume(Visitor visitor){
        for(JobSeeker jobSeeker : list){
            jobSeeker.accept(visitor);
        }
    }

    public void addJobSeeker(JobSeeker jobSeeker){
        list.add(jobSeeker);
    }
}    
</code></pre><blockquote>
<p>查阅简历类</p>
</blockquote>
<pre><code>class CLient{
    public static void main(String[] args){
        JobStructure jobStructure = new JobStructure();
        jobStructure.addJobSeeker(new Coder(&quot;小强&quot;,&quot;清华&quot;,&quot;Android&quot;));
        jobStructure.addJobSeeker(new Coder(&quot;小民&quot;,&quot;北大&quot;,&quot;Word&quot;));
        jobStructure.seeResume(new CTOVisitor());
        jobStructure.seeResume(new HRVisitor());
    }
}    
</code></pre><blockquote>
<p>客户端类，收集简历，CTO查看简历，HR查看简历</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之访问者模式&lt;/center&gt;

&lt;blockquote&gt;
&lt;p&gt;访问者模式&lt;br&gt;例子以公司招聘查看简历为背景&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_i
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之模板方法模式</title>
    <link href="http://www.smallstrong.wang/2017/05/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/05/12/设计模式之模板方法模式/</id>
    <published>2017-05-12T07:31:51.000Z</published>
    <updated>2017-05-12T10:00:30.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之模板方法模式</center>


<blockquote>
<p>模板方法模式</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-e3500c32024cfc9b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="模板方法UML.png"></p>
<pre><code>abstract class AbsTemplate{
    protected void stepOne(){
        //步骤一
    }
    protected void stepTwo(){
        //步骤二
    }
    protected void stepThree(){
        //步骤三
    }
    public void run(){
        stepOne();
        stepTwo();
        stepThree();
    }
}
</code></pre><blockquote>
<p>抽象模板，定义三个必要步骤和一个实现事情的功能方法</p>
</blockquote>
<pre><code>class TemplateA extends AbsTemplate{
    protected void stepOne(){
        super.stepOne();
        //步骤一
        //添加一些这个实现类想添加的逻辑
    }
    protected void stepTwo(){
        super.stepTwo();
        //步骤二
        //添加一些这个实现类想添加的逻辑
    }
    protected void stepThree(){
        super.stepThree();
        //步骤三
        //添加一些这个实现类想添加的逻辑
    }
}    
</code></pre><blockquote>
<p>实现类A，在实现步骤的具体方法中实现A特有的逻辑</p>
</blockquote>
<pre><code>class TemplateB extends AbsTemplate{
    protected void stepOne(){
        super.stepOne();
        //步骤一
        //添加一些这个实现类想添加的逻辑
    }
    protected void stepTwo(){
        super.stepTwo();
        //步骤二
        //添加一些这个实现类想添加的逻辑
    }
    protected void stepThree(){
        super.stepThree();
        //步骤三
        //添加一些这个实现类想添加的逻辑
    }
}    
</code></pre><blockquote>
<p>实现B，在实现步骤的具体方法中实现B特有的逻辑</p>
</blockquote>
<pre><code>class Client{
    pblic static void main(String[] args){
        AbsTemplate template = new TemplateA();
        template.run();//A 搞事
        template = new TemplateB();
        template.run();//B 搞事
    }
}
</code></pre><blockquote>
<p>客户端</p>
</blockquote>
<h3 id="个人想法"><a href="#个人想法" class="headerlink" title="个人想法"></a>个人想法</h3><p>模板模式的适用场景是一套固定的流程，但是流程中具体的实现或许会有差异。可以把共同逻辑抽到抽象父类中实现，在子类中实现个性化的代码。    </p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之模板方法模式&lt;/center&gt;


&lt;blockquote&gt;
&lt;p&gt;模板方法模式&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1321838-e
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之状态模式</title>
    <link href="http://www.smallstrong.wang/2017/05/11/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/05/11/设计模式之状态模式/</id>
    <published>2017-05-11T07:16:11.000Z</published>
    <updated>2017-05-11T07:31:55.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之状态模式</center>


<blockquote>
<p>状态模式</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-e29eb69db5ab30ed.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="状态模式UML.png">    </p>
<pre><code>interface TransformersState{
    void skill();//变形金刚不同状态下有不同技能
}
</code></pre><blockquote>
<p>汽车人接口    </p>
</blockquote>
<pre><code>class CarTransformersState implements TransformersState{
    public void skill(){
        // 汽车状态，技能就是压马路吧
    }
}
</code></pre><blockquote>
<p>变形金刚的汽车型状态</p>
</blockquote>
<pre><code>class FightingTransformersState implements TransformersState{
    public void skill(){
        // 战斗状态，技能反正不是压马路，就假设为射击技能吧
    }
}
</code></pre><blockquote>
<p>变形金刚的战斗型状态</p>
</blockquote>
<pre><code>class Context{
    TransformersState mTransformersState;
    public void setState(TransformersState mTransformersState){
    this.mTransformersState = mTransformersState;
    }
    public void skill(){
        mTransformersState.skill();
    }
}
</code></pre><blockquote>
<p>用来管理切换状态的类</p>
</blockquote>
<pre><code>class Client{
    public static void main(String[] args){
        Context context = new Context();
        context.setState(new FightingTransformersState());//切到战斗模式
        context.skill();//战斗状态下的技能
        context.setState(new CarTransformersState());//切到跑车模式
        context.skill();//跑车状态下的技能
    }
}    
</code></pre><blockquote>
<p>客户端</p>
</blockquote>
<h4 id="状态模式的场景一个对象的具体行为取决于这个对象内部的状态，这些状态可以被抽象出来单独为类。这种模式一定程度上会解决if-else多层判断的问题。状态及某种状态的具体实现可以被抽出去成类，层次会比较清晰，不过类会增多"><a href="#状态模式的场景一个对象的具体行为取决于这个对象内部的状态，这些状态可以被抽象出来单独为类。这种模式一定程度上会解决if-else多层判断的问题。状态及某种状态的具体实现可以被抽出去成类，层次会比较清晰，不过类会增多" class="headerlink" title="状态模式的场景一个对象的具体行为取决于这个对象内部的状态，这些状态可以被抽象出来单独为类。这种模式一定程度上会解决if-else多层判断的问题。状态及某种状态的具体实现可以被抽出去成类，层次会比较清晰，不过类会增多"></a>状态模式的场景一个对象的具体行为取决于这个对象内部的状态，这些状态可以被抽象出来单独为类。这种模式一定程度上会解决if-else多层判断的问题。状态及某种状态的具体实现可以被抽出去成类，层次会比较清晰，不过类会增多</h4>]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之状态模式&lt;/center&gt;


&lt;blockquote&gt;
&lt;p&gt;状态模式&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1321838-e29eb
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之观察者模式</title>
    <link href="http://www.smallstrong.wang/2017/05/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/05/10/设计模式之观察者模式/</id>
    <published>2017-05-10T06:20:14.000Z</published>
    <updated>2017-05-10T08:36:27.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之观察者模式</center>

<blockquote>
<p>观察者模式</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-c0313263af1576f5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="观察者模式UML.png"></p>
<pre><code>abstract class Subject{
    protected ArrayList&lt;Observer&gt; list = new ArrayList&lt;&gt;();
    void notift();
    void addObserver(Observer observer);
    void removeObserver(Observer observer);
}
</code></pre><blockquote>
<p>抽象观察对象    </p>
</blockquote>
<pre><code>class ConcreteSubject extends Subject{
    public void notify(){
        for(int i = 0;i &lt; list.size();i++){
            list.get(i).update(&quot;坐骑：秋名山神车---五菱宏光&quot;);    
        }
    }

    public addObserver(Observer observer){
        list.add(observer);
    }

    public removeObserver(Observer observer){
        list.remove(observer);
    }
}
</code></pre><blockquote>
<p>具体观察对象        </p>
</blockquote>
<pre><code>interface Observer{
    void update(String str);
}
</code></pre><blockquote>
<p>抽象观察者</p>
</blockquote>
<pre><code>class ConcreteObserver implements Observer{
    public void update(String str){
        System.out.println(str);
    }
}    
</code></pre><blockquote>
<p>观察者</p>
</blockquote>
<pre><code>class Client{
    public static void main(String[] args){
        Subject mSubject = new ConcreteSubject();
        mSubject.add(new ConcreteObserver());
        mSubject.add(new ConcreteObserver());
        mSubject.add(new ConcreteObserver());
        mSubject.notify();
    }
}    
</code></pre><blockquote>
<p>客户端</p>
</blockquote>
<h4 id="本例很简单的说明了观察者模式，被观察对象发生变化时通知订阅该对象的观察者们作出相应改变。在Java的API中就内涵了这些，平时写的接口回调也是类似。Android中事件总线，广播等等都用到这这种模式。"><a href="#本例很简单的说明了观察者模式，被观察对象发生变化时通知订阅该对象的观察者们作出相应改变。在Java的API中就内涵了这些，平时写的接口回调也是类似。Android中事件总线，广播等等都用到这这种模式。" class="headerlink" title="本例很简单的说明了观察者模式，被观察对象发生变化时通知订阅该对象的观察者们作出相应改变。在Java的API中就内涵了这些，平时写的接口回调也是类似。Android中事件总线，广播等等都用到这这种模式。"></a>本例很简单的说明了观察者模式，被观察对象发生变化时通知订阅该对象的观察者们作出相应改变。在Java的API中就内涵了这些，平时写的接口回调也是类似。Android中事件总线，广播等等都用到这这种模式。</h4>]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之观察者模式&lt;/center&gt;

&lt;blockquote&gt;
&lt;p&gt;观察者模式&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1321838-c031
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之备忘录模式</title>
    <link href="http://www.smallstrong.wang/2017/05/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/05/09/设计模式之备忘录模式/</id>
    <published>2017-05-09T02:14:43.000Z</published>
    <updated>2017-05-09T07:14:32.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之备忘录模式</center>



<blockquote>
<p>备忘录模式</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-ac5dddfc229f6593.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="备忘录模式UML.png"></p>
<pre><code>class Originator{
    private int stateA = 0;
    private int stateB = 0;
    private int stateC = 0;

    public Memoto createMemoto(){
        Memoto memoto = new Memoto();
        memoto.setStateA(stateA);
        memoto.setStateB(stateB);
        memoto.setStateC(stateC);
    }

    public void restore(Memoto memoto){
        this.stateA = memoto.getStateA();
        this.stateB = memoto.getStateB();
        this.stateC = memoto.getStateC();
    }

    public void change(){
        stateA = 1;
        stateB = 2;
        stateC = 3;
    }

    public void showData(){
        System.out.println(stateA+&quot;==&quot;+stateB+&quot;==&quot;+stateC);
    }

}
</code></pre><blockquote>
<p>原始类</p>
</blockquote>
<pre><code>class Memoto{
    private int stateA;
    private int stateB;
    private int stateC;

    public int getStateA(){
        return this.stateA;
    }
    public int getStateB(){
        return this.stateB;
    }
    public int getStateC(){
        return this.stateC;
    }
    public void setStateA(int a){
        this.stateA = a;
    }
    public void setStateB(int b){
        this.stateB = b;
    }
    public void setStateC(int c){
        this.stateC = c;
    }
}    
</code></pre><blockquote>
<p>数据bean类</p>
</blockquote>
<pre><code>class Caretaker{
    Memoto memoto;
    public Memoto restoreMemoto(){
        return this.memoto;//恢复数据
    }

    public void storeMemoto(Memoto memoto){
        this.memoto = memoto;
    }
}
</code></pre><blockquote>
<p>备忘录对象，管理Memoto对象</p>
</blockquote>
<pre><code>class Cliten{
    public static void main(String args[]){
        Originator originator = new Originator();
        Caretaker caretaker = new Caretaker();
        originator.showData();//原始数据为 0 0 0 
        originator.change();//改变之后为 1 2 3
        caretaker.storeMemoto(originator.createMemoto());//存储状态
        //模拟下次登录之后 重新开始
        Originator originatorNew = new Originator();    
        originatorNew.restore(caretaker.restoreMemoto());
        originatorNew.showData();//数据为 1 2 3
    }
}
</code></pre><blockquote>
<p>客户端模拟备忘录模式。当需要保存状态的时候将状态存入Caretaker即可。Caretaker这里只是保存最后一次变化状态，可以扩展需求做的更丰富一些。</p>
</blockquote>
<h4 id="个人总结"><a href="#个人总结" class="headerlink" title="个人总结"></a>个人总结</h4><p>例子比较简单，仅仅只是备忘录模式的原型。一句话概括就是备忘录类会记住应该记住的状态，而存储与恢复状态在原始类中调用。<br>备忘录模式在Android源码里面例子，当界面退居后台或者由于内存不足被干翻，在这之前会调用Activity中onSaveInstanceState方法保存状态。当界面再次出现在界面上时在onRestoreInstanceState方法中获取之前保存的状态。</p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之备忘录模式&lt;/center&gt;



&lt;blockquote&gt;
&lt;p&gt;备忘录模式&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1321838-ac
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之中介者模式</title>
    <link href="http://www.smallstrong.wang/2017/05/08/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/05/08/设计模式之中介者模式/</id>
    <published>2017-05-08T06:22:44.000Z</published>
    <updated>2017-05-08T07:11:09.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之中介者模式</center>


<blockquote>
<p>中介者模式，最近因为某种原因（穷）,导致要买二手车挂指标。正好拿来当中介者模式的例子。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-2f5f359c9ef29729.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="中介者模式UML.png"></p>
<pre><code>abstract class Mediator{
    protected BuyCarPeople buyer;
    protected SoldCarPeople solder;

    public abstract void work();

    public void setBuyCarPeople(BuyCarPeople buyer){
        this.buyer = buyer;
    }

    public void setSoldCarPeople(SoldCarPeople solder){
        this.solder = solder;
    }
}
</code></pre><blockquote>
<p>抽象中介者，抽象方法work是中介的职责</p>
</blockquote>
<pre><code>class GuaZiMediator extends Mediator{
    public void work(){
        getCarInfo();
        getMoneyFromBuyer();
        //中间抽层
        giveMoneyForSolder();
        giveCarForBuyer();
    }

    private void getCarInfo(）{
        solder.actionToMediator();
    }

    private void getMoneyFromBuyer(){
        buyer.actionToMediator();
    }

    private void giveMoneyForSolder(){
        solder.actionFromMediator();
    }

    private void giveCarForBuyer(){
        buyer.actionFromMediator();
    }
}
</code></pre><blockquote>
<p>具体的中介者，在买卖二手车这件事情之中，完全对接买卖双发，中间干点羞羞的事情</p>
</blockquote>
<pre><code>abstract class People{
    protected Mediator mediator;
    public People(Mediator mediator){
        this.mediator = mediator;
    }
    abstract void actionToMediator();
    abstract void actionFromMediator();
}
</code></pre><blockquote>
<p>抽象买二手车的买卖双方</p>
</blockquote>
<pre><code>class BuyCarPeople extends People{
    public BuyCarPeople(Mediator mediator){
        super(mediator);
    }

    public void actionToMediator(){
        // 把钱给中介
    }

    public void actionFromMediator(){
        //中介给我车
    }
}
</code></pre><blockquote>
<p>买车人    </p>
</blockquote>
<pre><code>class SoldCarPeople extends People{
    public SoldCarPeople(Mediator mediator){
        super(mediator);
    }

    public void actionToMediator(){
        //把车给中介 帮忙卖
    }

    public void actionFromMediator(){
        //中介把卖车钱给我
    }
}
</code></pre><blockquote>
<p>卖车人</p>
</blockquote>
<pre><code>public class Client{
    Mediator mediator = new GuaZiMediator();
    SolderCarPeople solder = new SolderCarPeople(mediator);
    BuyCarPeople buyer = new BuyCarPeople(mediator);
    mediator.setBuyCarPeople(buyer);
    mediator.setSoldCarPeople(solder);
    mediator.work();//中介帮忙买卖车
}
</code></pre><blockquote>
<p>客户端    </p>
</blockquote>
<h4 id="个人总结"><a href="#个人总结" class="headerlink" title="个人总结"></a>个人总结</h4><p>当两个或者更多的对象之间要相互调用，互相持有是很麻烦的事情。引入中介者模式，中介者类会联系各方，所有的方法需求都通过中介者转达。中介者持有所有各个对象完成交互。</p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之中介者模式&lt;/center&gt;


&lt;blockquote&gt;
&lt;p&gt;中介者模式，最近因为某种原因（穷）,导致要买二手车挂指标。正好拿来当中介者模式的例子。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-image
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之迭代器模式</title>
    <link href="http://www.smallstrong.wang/2017/05/04/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/05/04/设计模式之迭代器模式/</id>
    <published>2017-05-04T05:58:22.000Z</published>
    <updated>2017-05-04T07:18:32.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之迭代器模式</center>

<blockquote>
<p>迭代器模式</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-456a5db7d266ead1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="迭代器UML.png"></p>
<pre><code>public  interface Iterator&lt;T&gt;{
    boolean hasNext();
    T next();
}
</code></pre><blockquote>
<p>迭代器接口    </p>
</blockquote>
<pre><code>public class ConcreteIterator&lt;T&gt; implements Iterator&lt;T&gt; {
    private List&lt;T&gt; list = new ArrayList&lt;T&gt;();
    private int cursor = 0;

    public ConcreteIterator(List&lt;T&gt; list){
        this.list = list;
    }

    public boolean hasNext(){
        return cursor != list.size();
    }

    public T next(){
        T obj = null;
        if(this.next()){
            obj = this.list.get(cursor++);
        }
        return obj;
    }
}
</code></pre><blockquote>
<p>具体迭代器类    </p>
</blockquote>
<pre><code>public interface Aggregate&lt;T&gt;{
    void add(T obj);
    void remove(T obj);
    Iterator&lt;T&gt; iterator();
}
</code></pre><blockquote>
<p>容器接口</p>
</blockquote>
<pre><code>public class     ConcreteAggregate&lt;T&gt; implements Aggregate&lt;T&gt;{
    private List&lt;T&gt; list = new ArrayList&lt;&gt;();
    public void add(T obj){
        list.add(obj);
    }
    public void remove(T obj){
        list.remove(obj);
    }
    public Iterator&lt;T&gt; iterator(){
        return new ConcreteIterator&lt;T&gt;(list);
    }
}
</code></pre><blockquote>
<p>具体容器类    </p>
</blockquote>
<pre><code>public class Client{
    public static void main(String args[]){
        Aggregate&lt;String&gt; data = new ConcreteAggregate&lt;&gt;();
        data.add(&quot;1&quot;);
        data.add(&quot;2&quot;);
        data.add(&quot;3&quot;);
        data.add(&quot;4&quot;);
        Iterator&lt;String&gt; i = data.iterator();
        whihe(i.hasNext()){
            System.out.print(i.next());
        }
    }
}
</code></pre><blockquote>
<p>客户端</p>
</blockquote>
<h3 id="个人理解"><a href="#个人理解" class="headerlink" title="个人理解"></a>个人理解</h3><p>在java中的集合是迭代器模式的最好体现。在Android中数据库查询所用到的Cursor，用query方法查询数据库会返回一个Cursor游标，用它来遍历数据。</p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之迭代器模式&lt;/center&gt;

&lt;blockquote&gt;
&lt;p&gt;迭代器模式&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1321838-456a
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之解释器模式</title>
    <link href="http://www.smallstrong.wang/2017/05/03/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/05/03/设计模式之解释器模式/</id>
    <published>2017-05-03T02:05:21.000Z</published>
    <updated>2017-05-03T02:43:40.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之解释器模式</center>


<blockquote>
<p>解释器模式</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-8e27a4af2008c064.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="解释器模式UML.png"></p>
<p>本例想描述一个筛子游戏，假设筛子的范围是一到六这六个中文字，最后判大小,以分号为结尾。输入类型：例（三四五;）十二点，大</p>
<pre><code>abstract class AbstractExpression{
    Object interpret(String str);
}
</code></pre><blockquote>
<p>抽象解释方法    </p>
</blockquote>
<pre><code>class TerminalExpression extends AbstractExpression{
    public Object interpret(String str){
        switch(str){
            case &quot;一&quot;:
                return 1;
                break;
            case &quot;二&quot;:
                return 2;
                break;
            case &quot;三&quot;:
                return 3;
                break;
            case &quot;四&quot;:
                return 4;
                break;
            case &quot;五&quot;:
                return 5;
                break;
            case &quot;六&quot;:
                return 6;
                break;    
            default:
                return 0;                
        }
    }
}
</code></pre><blockquote>
<p>数字解释方法    </p>
</blockquote>
<pre><code>class NonTerminalExpression extends AbstractExpression{
    public Object interpret(String str){
        if(&quot;;&quot;.euqals(str){
            return &quot;finish&quot;
        }else{
            return &quot;finish&quot;;
        }
    }
}
</code></pre><blockquote>
<p>结束解释器    </p>
</blockquote>
<pre><code>class Calculator{
    TerminalExpression terminalExpression = new terminalExpression();
    NonTerminalExpression nonTerminalExpression = new NonTerminalExpression();
    int sum = 0;
    public String calculator(String key){
        for(int i = 0;i &lt; 3;i ++){
            sum = sum + terminalExpressionin.terpret(key.charAt(i));
        }
        Log.i(&quot;smallstrong&quot;,nonTerminalExpression. interpret(key.charAt(3)));
        if(sum &lt;= 9){
            return &quot;小&quot;;
        }else{
            return &quot;大&quot;;
        }
    }
}
</code></pre><blockquote>
<p>解释器处理类    </p>
</blockquote>
<pre><code>class Client{
    public static void main(String args[]){
        Calculator mCalculator = new Calculator();
        Log.i(&quot;smallstrong&quot;,mCalculator.calculator(&quot;六六六;&quot;));
    }
}
</code></pre><blockquote>
<p>客户端</p>
</blockquote>
<h3 id="个人总结"><a href="#个人总结" class="headerlink" title="个人总结"></a>个人总结</h3><p>解释器模式这例子很牵强，实际运用也是极少。看了许多大佬们的blog都觉得不是很理解。<br>正则表达在编译时的处理算是解释器模式比较好的例子。</p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之解释器模式&lt;/center&gt;


&lt;blockquote&gt;
&lt;p&gt;解释器模式&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1321838-8e2
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之命令模式</title>
    <link href="http://www.smallstrong.wang/2017/05/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/05/02/设计模式之命令模式/</id>
    <published>2017-05-02T06:26:31.000Z</published>
    <updated>2017-05-02T06:55:34.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之命令模式</center>


<blockquote>
<p>命令模式</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-fb4422e6ea2b011c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="命令模式UML.png"></p>
<pre><code>class GameBoy{
    public void toLeft(){
        //左移
    }
    public void toRight(){
        //右移
    }
    public void toTop(){
        //上移
    }
    public void toBottom(){
        //下移
    }
    public void toA(){
        //A键出拳
    }
    public void toB(){
        //B键踢腿
    }
}
</code></pre><blockquote>
<p>GameBoy,游戏机类    </p>
</blockquote>
<pre><code>interface Command{
    void execute();
}
</code></pre><blockquote>
<p>按钮接口    </p>
</blockquote>
<pre><code>class LeftCommand implements Command{
    private GameBoy gameBoy;
    public LeftCommand(GameBoy gameBoy){
        this.gameBoy = gameBoy;
    }
    public void execute(){
        gameBoy.toLeft();
    }
}

class RightCommand implements Command{
    private GameBoy gameBoy;
    public RightCommand(GameBoy gameBoy){
        this.gameBoy = gameBoy;
    }
    public void execute(){
        gameBoy.toRight();
    }
}    

class TopCommand implements Command{
    private GameBoy gameBoy;
    public TopCommand(GameBoy gameBoy){
        this.gameBoy = gameBoy;
    }
    public void execute(){
        gameBoy.toTop();
    }
}    

class BottomCommand implements Command{
    private GameBoy gameBoy;
    public BottomCommand(GameBoy gameBoy){
        this.gameBoy = gameBoy;
    }
    public void execute(){
        gameBoy.toBottom();
    }
}    

class ACommand implements Command{
    private GameBoy gameBoy;
    public ACommand(GameBoy gameBoy){
        this.gameBoy = gameBoy;
    }
    public void execute(){
        gameBoy.toA();
    }
}    


class BCommand implements Command{
    private GameBoy gameBoy;
    public BCommand(GameBoy gameBoy){
        this.gameBoy = gameBoy;
    }
    public void execute(){
        gameBoy.toB();
    }
}    
</code></pre><blockquote>
<p>上述六个类是具体的按键 上下左右AB键    </p>
</blockquote>
<pre><code>class Buttons{
    private Command leftCommand,rightCommand,topCommand,bottomCommand,aCommand,bCommand;
    public Buttons(Command leftCommand, Command rightCommand, Command topCommand, Command bottomCommand, Command aCommand, Command bCommand){
        this.leftCommand = leftCommand;
        this.rightCommand = rightCommand;
        this.topCommand = topCommand;
        this.bottomCommand = bottomCommand;
        this.aCommand = aCommand;
        this.bCommand = bCommand;
    }
    public void toLeft(){
        leftCommand.execute();
        //左移
    }
    public void toRight(){
        rightCommand.execute();
        //右移
    }
    public void toTop(){
        topCommand.execute();
        //上移
    }
    public void toBottom(){
        bottomCommand.execute();
        //下移
    }
    public void toA(){
        ACommand.execute();
        //A键出拳
    }
    public void toB(){
        BCommand.execute();
        //B键踢腿
    }

}
</code></pre><blockquote>
<p>键盘按钮类，开关类    </p>
</blockquote>
<pre><code>public class Client{
    public static void main(String[] args){
        GameBoy gameBoy = new GameBoy();//游戏机先创建出来
        // 上下左右AB命令
        Command leftCommand,rightCommand,topCommand,bottomCommand,aCommand,bCommand;
        leftCommand = new LeftCommand(gameBoy);
        rightCommand = new RightCommand(gameBoy);
        topCommand = new TopCommand(gameBoy);
        bottomCommand = new BottomCommand(gameBoy);
        aCommand = new ACommand(gameBoy);
        bCommand = new BCommand(gameBoy);

        // 具体操作的按键
        Buttons buttons = new Buttons(leftCommand,rightCommand,topCommand,bottomCommand,aCommand,bCommand);
        //按键按下执行操作
        buttons.toLeft();
        buttons.toRight();
        buttons.toTop();
        buttons.toBottom();
        buttons.toA();
        buttons.toB();
    }        
}
</code></pre><h4 id="个人总结"><a href="#个人总结" class="headerlink" title="个人总结"></a>个人总结</h4><p>上述用例讲的是一个小游戏机运用了命令模式，将按钮这个动作请求和具体实现功能解耦。功能上的解耦伴随的代价是类的数量的增多，在实际开发中根据场景来考量是否采用。</p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之命令模式&lt;/center&gt;


&lt;blockquote&gt;
&lt;p&gt;命令模式&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1321838-fb442
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之责任链模式</title>
    <link href="http://www.smallstrong.wang/2017/04/28/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/04/28/设计模式之责任链模式/</id>
    <published>2017-04-28T00:37:21.000Z</published>
    <updated>2017-04-28T07:25:34.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之责任链模式</center>


<blockquote>
<p>责任链模式</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-8ac226dddb839fd1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="责任链模式UML.png"></p>
<pre><code>abstract class Department{
    protected Department mDepartment;

    public void setDepartment(Department department){
        this.mDepartment = department;
    }

    public abstract void makeChoice(Things s);
}
</code></pre><blockquote>
<p>抽象部门，成员变量指定上级部门，定义处理事情的方法</p>
</blockquote>
<pre><code>class Municipal extends Department{
    public void makeChoice(Things s){
        if(s.level &lt;= 1){
            Log.i(&quot;smallstrong&quot;,&quot;市级部门&quot;+s.thing);
        }else{
            this.mDepartment.makeChoice(s);//报告上级
        }
    }
}
</code></pre><blockquote>
<p>市级部门</p>
</blockquote>
<pre><code>class Provincial extends Department{
    public void makeChoice(Things s){
        if(s.level &lt;= 2){
            Log.i(&quot;smallstrong&quot;,&quot;省级部门&quot;+s.thing);
        }else{
            this.mDepartment.makeChoice(s);//报告上级
        }
    }
}
</code></pre><blockquote>
<p>省级部门</p>
</blockquote>
<pre><code>class Country extends Department{
    public void makeChoice(Things s){
        if(s.level &gt; 0){
            Log.i(&quot;smallstrong&quot;,&quot;国家级部门&quot;+s.thing);
        }else{
            //this.mDepartment.makeChoice(s);//报告上级
        }
    }
}    
</code></pre><blockquote>
<p>国家级部门    </p>
</blockquote>
<pre><code>class Things{
    private static final int level;//1  市级范围  2 省级范围 3 国家级范围
    private static final String thing;

    public Things(int level ,String thing){
        this.level = level;
        this.thing = thing;
    }
}
</code></pre><blockquote>
<p>具体事情与等级    </p>
</blockquote>
<pre><code>class Client{
    public static void main(String args[]){
        Department mMunicipal,mProvincial,mCountry;
        mMunicipal = new Municipal();
        mProvincial = new Provincial();
        mCountry = new Country();
        mMunicipal.setDepartment(mProvincial);
        mProvincial.setDepartment(mCountry);

        Things thing = new Things(1,&quot;李达康冲击GDP&quot;);
        mMunicipal.makeChoice(thing);    

        Things thing = new Things(2,&quot;沙瑞金书记召开省部级会议&quot;);
        mMunicipal.makeChoice(thing);    

        Things thing = new Things(3,&quot;赵立春老书记被罢免&quot;);
        mMunicipal.makeChoice(thing);    
    }
}
</code></pre><blockquote>
<p>客户端，先要构造一个责任顺序。</p>
</blockquote>
<p>log如下</p>
<p>[市级部门李达康冲击GDP]</p>
<p>[沙瑞金书记召开省部级会议]</p>
<p>[赵立春老书记被罢免]</p>
<h3 id="个人总结"><a href="#个人总结" class="headerlink" title="个人总结"></a>个人总结</h3><p>责任链模式适用于多个对象都可以处理一个事情，对象可以根据情况处理或者丢给一个级别的对象处理。客户端要代码实现一个责任顺序。Android中view事件的分发已经有序广播的传递都采用了这种模式（相似）。</p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之责任链模式&lt;/center&gt;


&lt;blockquote&gt;
&lt;p&gt;责任链模式&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1321838-8ac
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之策略模式</title>
    <link href="http://www.smallstrong.wang/2017/04/27/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/04/27/设计模式之策略模式/</id>
    <published>2017-04-27T07:59:45.000Z</published>
    <updated>2017-04-27T08:14:01.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之策略模式</center>



<blockquote>
<p>策略模式</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-caa98047d7077bac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="策略模式UML.png"></p>
<pre><code>interface Hero{
    void kaida();
}
</code></pre><blockquote>
<p>英雄接口，开大。</p>
</blockquote>
<pre><code>class SunWuKong implements Hero{
    public void kaida(){
        //孙悟空开大
    }
}    
</code></pre><blockquote>
<p>英雄孙悟空，实现开大方法</p>
</blockquote>
<pre><code>class DianWei implements Hero{
    public void kaida(){
        //典韦跳大
    }
}
</code></pre><blockquote>
<p>英雄典韦,实现开大方法</p>
</blockquote>
<pre><code>class Military{
    private Hero hero;
    public Military(Hero hero){
        this.hero = hero;
    }

    public void kaida(){
        if(hero != null){
            hero.kaida();                
        }
    }
}
</code></pre><blockquote>
<p>军师类，军师职责是挑选合适的英雄去开大，就是这样</p>
</blockquote>
<pre><code>class Client{
    Hero hero = new SunWuKong();
    Military mMilitary = new Military(hero);
    mMilitary.kaida();
}
</code></pre><blockquote>
<p>客户端，这边选择的是孙悟空去开大，根据不同需求在运行时指定不同英雄，交给军师，让其开大</p>
</blockquote>
<h3 id="个人总结"><a href="#个人总结" class="headerlink" title="个人总结"></a>个人总结</h3><p>策略模式给我感觉是一种，想做一件事情，这事情有很多种解决途径，有对的有错的，这些途径就是策略类(例子中的孙悟空，典韦)，关键难点在于客户端如何抉择，这个是一个难点。</p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之策略模式&lt;/center&gt;



&lt;blockquote&gt;
&lt;p&gt;策略模式&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1321838-caa9
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>记一次项目引入bugly热修复（基于微信tinker）与接入walle多渠道打包共存的方式</title>
    <link href="http://www.smallstrong.wang/2017/04/26/%E8%AE%B0%E4%B8%80%E6%AC%A1%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5bugly%E7%83%AD%E4%BF%AE%E5%A4%8D%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%BE%AE%E4%BF%A1tinker%EF%BC%89%E4%B8%8E%E6%8E%A5%E5%85%A5walle%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85%E5%85%B1%E5%AD%98%E7%9A%84%E6%96%B9%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/04/26/记一次项目引入bugly热修复（基于微信tinker）与接入walle多渠道打包共存的方式/</id>
    <published>2017-04-26T13:06:15.000Z</published>
    <updated>2017-04-26T13:08:03.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="记一次项目引入bugly热修复（基于微信tinker）与接入walle多渠道打包共存的方式"><a href="#记一次项目引入bugly热修复（基于微信tinker）与接入walle多渠道打包共存的方式" class="headerlink" title="记一次项目引入bugly热修复（基于微信tinker）与接入walle多渠道打包共存的方式"></a>记一次项目引入bugly热修复（基于微信tinker）与接入walle多渠道打包共存的方式</h3><blockquote>
<p><a href="https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/?v=20170207114801" target="_blank" rel="external">bugly官方热更新指南</a></p>
<p><a href="https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix-demo/?v=20170207114801" target="_blank" rel="external">bugly官方接入使用详解</a></p>
<p><a href="https://github.com/Meituan-Dianping/walle" target="_blank" rel="external">walle github地址</a></p>
<p><a href="http://tech.meituan.com/android-apk-v2-signature-scheme.html" target="_blank" rel="external">walle 原理</a></p>
</blockquote>
<h4 id="写在最前面"><a href="#写在最前面" class="headerlink" title="写在最前面"></a>写在最前面</h4><ol>
<li>bugly热更新基于微信开源的热修复框架tinker，bugly集成了tinker，并将自家的崩溃日志SDK一起集成进了升级SDK中，bugly提供了热更新管理后台。</li>
<li>bugly提供的多渠道打包方式基于原始的productFlavors方式，会在最终dex中产生不同渠道的差异，因此会产生N多不同tinkId，因此对应tinkId打出补丁包的话也会产生N多。因此换用美团walle打包方式，在签名阶段将渠道信息写入。</li>
</ol>
<h3 id="首先先将bugly升级包中的Tinker引入"><a href="#首先先将bugly升级包中的Tinker引入" class="headerlink" title="首先先将bugly升级包中的Tinker引入"></a>首先先将bugly升级包中的Tinker引入</h3><ol>
<li>app目录下添加 apply from: ‘tinker-support.gradle’ 将tinker的gradle进行分拆</li>
<li>依赖他们家升级包  compile ‘com.tencent.bugly:crashreport_upgrade:latest.release’</li>
</ol>
<blockquote>
<p>贴出代码，下面这些就已经可以了，我个人遇到的一些问题列举一下。</p>
</blockquote>
<ol>
<li>def appName = “app-0210-15-36-17” 这引号里面的是你要去修复的生成版本时间文件夹（发版时候保存好，弄丢很刺激哦）</li>
<li>要生成补丁包的时候一定要更换 tinkerId = “joojia_tinker_patch”</li>
</ol>
<h5 id="新建tinker-support-gradle做gradle拆分"><a href="#新建tinker-support-gradle做gradle拆分" class="headerlink" title="新建tinker-support.gradle做gradle拆分"></a>新建tinker-support.gradle做gradle拆分</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">apply plugin: &apos;com.tencent.bugly.tinker-support&apos;</div><div class="line"></div><div class="line">def bakPath = file(&quot;$&#123;buildDir&#125;/bakApk/&quot;)</div><div class="line">//当你生成基准包的时候，请替换下面这行</div><div class="line">//这行在打出补丁包的时候会制定你/build/bakApk目录下的apk文件，进行对比。</div><div class="line">def appName = &quot;app-0210-15-36-17&quot;</div><div class="line"></div><div class="line">/**</div><div class="line"> * 对于插件各参数的详细解析请参考</div><div class="line"> */</div><div class="line">tinkerSupport &#123;</div><div class="line"></div><div class="line">    // 开启tinker-support插件，默认值true</div><div class="line">    enable = true</div><div class="line"></div><div class="line">    // 指定归档目录，默认值当前module的子目录tinker</div><div class="line">    autoBackupApkDir = &quot;$&#123;bakPath&#125;&quot;</div><div class="line"></div><div class="line">    // 是否启用覆盖tinkerPatch配置功能，默认值false</div><div class="line">    // 开启后tinkerPatch配置不生效，即无需添加tinkerPatch</div><div class="line">    overrideTinkerPatchConfiguration = true</div><div class="line"></div><div class="line">    // 编译补丁包时，必需指定基线版本的apk，默认值为空</div><div class="line">    // 如果为空，则表示不是进行补丁包的编译</div><div class="line">    // @&#123;link tinkerPatch.oldApk &#125;</div><div class="line">    baseApk =  &quot;$&#123;bakPath&#125;/$&#123;appName&#125;/app-release.apk&quot;</div><div class="line"></div><div class="line">    // 对应tinker插件applyMapping</div><div class="line">    baseApkProguardMapping = &quot;$&#123;bakPath&#125;/$&#123;appName&#125;/app-release-mapping.txt&quot;</div><div class="line"></div><div class="line">    // 对应tinker插件applyResourceMapping</div><div class="line">    baseApkResourceMapping = &quot;$&#123;bakPath&#125;/$&#123;appName&#125;/app-release-R.txt&quot;</div><div class="line">//这个id在生成基准包和生成patch时候都要修改</div><div class="line">    tinkerId = &quot;joojia_tinker_patch&quot;</div><div class="line"></div><div class="line">    //构建多渠道打包时候使用</div><div class="line">    buildAllFlavorsDir = &quot;$&#123;bakPath&#125;/$&#123;appName&#125;&quot;</div><div class="line"></div><div class="line">    // 是否开启代理Application，设置之后无须改造Application，默认为false</div><div class="line">    enableProxyApplication = true</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="接下来将walle多渠道打包接入"><a href="#接下来将walle多渠道打包接入" class="headerlink" title="接下来将walle多渠道打包接入"></a>接下来将walle多渠道打包接入</h3><ol>
<li>app目录下gradle添加 apply plugin: ‘walle’，依赖插件 classpath ‘com.meituan.android.walle:plugin:1.0.4’</li>
<li>依赖包 compile ‘com.meituan.android.walle:library:1.0.4’</li>
<li>添加channel文件在app目录下，里面写你的渠道号</li>
<li>app目录下gradle加段代码</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">walle &#123;</div><div class="line">    // 指定渠道包的输出路径</div><div class="line">    apkOutputFolder = new File(&quot;$&#123;project.buildDir&#125;/outputs/channels&quot;);</div><div class="line">    // 定制渠道包的APK的文件名称</div><div class="line">    apkFileNameFormat = &apos;$&#123;appName&#125;-$&#123;packageName&#125;-$&#123;channel&#125;-$&#123;buildType&#125;-v$&#123;versionName&#125;-$&#123;versionCode&#125;-$&#123;buildTime&#125;.apk&apos;;</div><div class="line">    // 配置渠道文件列表，也可以通过channelList来配置</div><div class="line">    channelFile = &quot;./channel&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="两者结合"><a href="#两者结合" class="headerlink" title="两者结合"></a>两者结合</h3><ol>
<li>首先 ./gradlew clean assembleRelease -PchannelFile=app/channel 会在BakApk先生成一个基准包，在output/channels目录下生成所有渠道包(千万注意你channel的目录)</li>
<li>./gradlew buildTinkerPatchRelease 生成一个补丁包基于上面那个基准包来生成即可，之后去bugly平台下发即可。</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;记一次项目引入bugly热修复（基于微信tinker）与接入walle多渠道打包共存的方式&quot;&gt;&lt;a href=&quot;#记一次项目引入bugly热修复（基于微信tinker）与接入walle多渠道打包共存的方式&quot; class=&quot;headerlink&quot; title=&quot;记一
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>设计模式之代理模式</title>
    <link href="http://www.smallstrong.wang/2017/04/26/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/04/26/设计模式之代理模式/</id>
    <published>2017-04-26T13:04:01.000Z</published>
    <updated>2017-04-26T13:05:44.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之代理模式</center>





<blockquote>
<p>代理模式,故事是这么发生的。你女票要看五月天演唱会，结果你上大麦手速不够么抢到。为了不再次成为单身狗，你决定去找黄牛搞票。不说了，下个月五块钱以上的活动不要叫我。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-6d569dcc93af98c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="代理模式UML.png"></p>
<pre><code>interface BuyTicket{
    void buyTicket();
}
</code></pre><blockquote>
<p>定义一个业务接口，买票</p>
</blockquote>
<pre><code>class RealBuyTicket implements BuyTicket{
    public void buyTicket(){
        //正正经经买票，大麦官方渠道
    }
}    
</code></pre><blockquote>
<p>这个是官方渠道，票其实都在这出售，但是谁叫你手速慢。（枉亏我自称麒麟臂）</p>
</blockquote>
<pre><code>class ProxyBuyTicket implements BuyTicket{
    RealBuyTicket realBuyTicket = new RealBuyTicket();
    public void buyTicket(){
        addMoney();// 收点代理费
        realBuyTicket.buyTicket();
    }

    public void addMoney(){
        // 老铁，加点钱
    }
}
</code></pre><blockquote>
<p>买票代理类，加钱就能买</p>
</blockquote>
<pre><code>class Clitet{
    public static void main(String[] args){
        BuyTicket mButTicket = new ProxyBuyTicket();
        mButTicket.buyTicket();
    }
}
</code></pre><blockquote>
<p>找到黄牛，买五月天内场门票，两张哦！</p>
</blockquote>
<h3 id="个人总结"><a href="#个人总结" class="headerlink" title="个人总结"></a>个人总结</h3><p>代理模式其实衍生开去分为很多种类，包括远程代理（翻墙），虚拟代理（用在要创建资源耗费大的对象时候用到），缓冲代理（避免重复请求） 等。代理类及真正的实现类其实在实际中处理业务会非常复杂。</p>
<p>代理模式能总结成一句话，我想做某件事，自己做不到或者不能直接做，需要找个方法代理来处理。</p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之代理模式&lt;/center&gt;





&lt;blockquote&gt;
&lt;p&gt;代理模式,故事是这么发生的。你女票要看五月天演唱会，结果你上大麦手速不够么抢到。为了不再次成为单身狗，你决定去找黄牛搞票。不说了，下个月五块钱以上的活动不要叫我。&lt;/p&gt;
&lt;/bloc
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之享元模式</title>
    <link href="http://www.smallstrong.wang/2017/04/26/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/04/26/设计模式之享元模式/</id>
    <published>2017-04-26T13:03:07.000Z</published>
    <updated>2017-04-26T13:03:41.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之享元模式</center>


<blockquote>
<p>享元模式，刚好现在共享单车火，拿来开刀</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-cf870c8243622b17.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="享元模式UML.png"></p>
<pre><code>interface ShareBike{
    void ride();
}
</code></pre><blockquote>
<p>抽象共享单车    </p>
</blockquote>
<pre><code>class ShareBikeOFO implements ShareBike{
    public void ride(){
        //小黄车驾到
    }
}
</code></pre><blockquote>
<p>天朝小黄车</p>
</blockquote>
<pre><code>class ShareBikeMoBai implements ShareBike{
    public void ride(){
        //摩拜单车
    }
}
</code></pre><blockquote>
<p>50斤的摩拜单车</p>
</blockquote>
<pre><code>class BikeType{
    public static final String OFO = &quot;OFO&quot;;
    public static final String MOBAI = &quot;MOBAI&quot;;
}
</code></pre><blockquote>
<p>共享单车类型    </p>
</blockquote>
<pre><code>class ShareBikeFactory{
    HashMap shareBikeMaps = new HashMap();

    public ShareBikeFactory(){
        shareBikeFactory.put(&quot;BikeType.OFO&quot;,new ShareBikeOFO());
        shareBikeFactory.put(&quot;BikeType.MOBAI&quot;,new ShareBikeMoBai());
    }

    public ShareBike getShareBike(String type){
        if(BikeType.OFO.equals(type)){
            return (ShareBikeOFO)shareBikeMaps.get(type);
        }else if(BikeType.MOBAI.equals(type){
            return (ShareBikeMOBAI)shareBikeMaps.get(type);
        }
        return null;
    }
}
</code></pre><blockquote>
<p>单车托管所</p>
</blockquote>
<pre><code>public class Client{
    public static void main(String args[]){
        ShareBikeFactory mshareBikeFactory = new ShareBikeFactory();
        ShareBike shareBikeOFO,shareBikeMobai;
        shareBikeOFO  = mshareBikeFactory.get(BikeType.OFO);
        shareBikeMoBai  = mshareBikeFactory.get(BikeType.MOBAI);
        shareBikeOFO.ride();
        shareBikeMoBai.ride();
    }
}
</code></pre><blockquote>
<p>客户端根据需求拿单车来骑车</p>
</blockquote>
<h3 id="个人总结"><a href="#个人总结" class="headerlink" title="个人总结"></a>个人总结</h3><p>享元模式是为了避免大量创建对象省内存时候用的，Android中消息机制中Message用链表来存储消息实现消息复用就是用到这种模式。</p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之享元模式&lt;/center&gt;


&lt;blockquote&gt;
&lt;p&gt;享元模式，刚好现在共享单车火，拿来开刀&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_image
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>设计模式之外观模式</title>
    <link href="http://www.smallstrong.wang/2017/04/26/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/"/>
    <id>http://www.smallstrong.wang/2017/04/26/设计模式之外观模式/</id>
    <published>2017-04-26T13:01:59.000Z</published>
    <updated>2017-04-26T13:02:42.000Z</updated>
    
    <content type="html"><![CDATA[<center>设计模式之外观模式</center>

<blockquote>
<p>外观模式，例子是我经常去莲花街一家叫好吃不如饺子的店，东西好吃，便宜实惠。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1321838-4c0a8288e34372a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="外观模式UML.png"></p>
<pre><code>interface Food{
    void eat();
}
</code></pre><blockquote>
<p>食物接口    吃方法</p>
</blockquote>
<pre><code>class Dumplings implements Food{
    public void eat(){
        //嫂子家的饺子，感觉一般般
    }
}
</code></pre><blockquote>
<p>饺子    </p>
</blockquote>
<pre><code>class SaucedNoodles implements Food{
    public void eat(){
        //嫂子家的打卤面  么的说
    }
}
</code></pre><blockquote>
<p>打卤面</p>
</blockquote>
<pre><code>class IronBoardRice implements Food{
    public void eat(){
        //嫂子家的铁板饭  也么的说
    }
}    
</code></pre><blockquote>
<p>铁板饭</p>
</blockquote>
<pre><code>class RestaurantFacade{
    Food mDumplings,mSaucedNoodles,mIronBoardRice;

    public RestaurantFacade(){
        //无参构造
    }

    public void eatDumplings(){
        if(mDumplings == null){
            mDumplings = new Dumplings();
        }
        mDumplings.eat();
    }

    public void eatSaucedNoodles(){
        if(mSaucedNoodles == null){
            mSaucedNoodles = new SaucedNoodles();
        }
        mSaucedNoodles.eat();
    }

    public void eatIronBoardRice(){
        if(mIronBoardRice == null){
            mIronBoardRice = new IronBoardRice();
        }
        mIronBoardRice.eat();
    }
}
</code></pre><blockquote>
<p>好吃不如饺子这家店，提供各色菜系</p>
</blockquote>
<pre><code>public class Client{
    public static void main(String[] args){
        RestaurantFacade mRestaurantFacade = new RestaurantFacade();
        mRestaurantFacade.eatDumplings();//吃饺子
        mRestaurantFacade.eatSaucedNoodles();//吃打卤面
        mRestaurantFacade.eatIronBoardRice();//吃铁板饭
    }
}
</code></pre><blockquote>
<p>客户端调用这家店，点菜吃东西</p>
</blockquote>
<h3 id="个人的理解"><a href="#个人的理解" class="headerlink" title="个人的理解"></a>个人的理解</h3><p>外观模式又叫门面模式，在很多开源库中都很常见，更多的作用是一种客户端与具体实现类的隔离。</p>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;设计模式之外观模式&lt;/center&gt;

&lt;blockquote&gt;
&lt;p&gt;外观模式，例子是我经常去莲花街一家叫好吃不如饺子的店，东西好吃，便宜实惠。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jiansh
    
    </summary>
    
      <category term="设计模式" scheme="http://www.smallstrong.wang/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
  </entry>
  
</feed>
